<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Armed Bandit Algorithm Recommender</title>
    <link href="{{url_for('static', filename='styles/style.css')}}" rel="stylesheet" />
</head>
<body>
    <h1>Multi-Armed Bandit Algorithm Recommender</h1> 
    <p>Welcome to the Multi-Armed Bandit Algorithm Recommender! This tool helps you choose the best algorithm and parameters for your specific context.</p>
    <p>TO DO: INSERT PROJECT BLURB HERE</p>
    <p>To get started, please enter the relevant details below. Once you submit the form, you'll receive a recommendation based on your inputs.</p>
    <p>Feel free to adjust the parameters to see how they affect the recommendations!</p>
    <br> <!-- Adds a line break -->   
    <hr>
    <h2>Enter Project Details: </h2>
    <form action="/recommend" method="post">
       
        <div class="input-container2">
            <label for="n_arm">Number of Arms:</label>
            <input type="number" id="n_arm" name="n_arm" min="2" placeholder="Enter the number of arms in your project" required>
            <label for="horizon">Horizon:</label>
            <input type="number" id="horizon" name="horizon" min="10" placeholder="Enter the max horizon (number of rounds) you would like to try" required>
            <label for="n_rep"> Number of Repetitions: </label>   
            <input type="number" id = "n_rep" name="n_rep" min="1" placeholder="Enter the number of simulation repetitions you would like" required>  
        </div>
   
        <div class = "input-container2">
            <label for="reward_distribution">Reward Distribution:</label>
            <select id="reward_distribution" name="reward_distribution" required>
                <option value="" selected disabled>Select your reward distribution</option>
                <option value="bernoulli">Bernoulli</option>
                <option value="gaussian">Gaussian</option>
            </select>
            <label for="h1_loc">Distribution Mean, &mu;:</label>
            <input type="number" id="h1_loc" name="h1_loc" value="0.5" required>
            <label for="h1_scale">Standard Deviation, &sigma;</label>
            <input type="number" id="h1_scale" name="h1_scale" value="0.15" required>
        </div>

        <div class = "input-container3">
            <label for="test_name">Desired Statistical Test:</label>
            <select id="test_name" name="test_name" required onchange="handleTestSelection()">
                <option value="" selected disabled>Select the statistical test you would like to include</option>
                <option value="anova">ANOVA</option>
                <option value="t_control">T-control</option>
                <option value="t_constant">T-constant</option>
                <option value="tukey">Tukey</option>
            </select>
            <label for="type1_error_constraint">Type I Error Constraint:</label>
            <input type="number" id="type1_error_constraint" name="type1_error_constraint" placeholder="Enter Type I error constraint" value="0.05" required>
        </div>

        <script>
            function handleTestSelection() {
                // Get the selected value from the dropdown
                const selectedTest = document.getElementById('test_name').value;
        
                // Hide all conditional inputs by default
                document.querySelectorAll('.conditional-inputs').forEach(div => {
                    div.style.display = 'none';
                });
        
                // Show the relevant input fields based on the selected option
                if (selectedTest === 't_constant') {
                    document.getElementById('t-constant-inputs').style.display = 'block';
                } else if (selectedTest === 't_control') {
                    document.getElementById('t-control-inputs').style.display = 'block';
                }
                // Add more conditions for other options if needed
            }
        </script>

          
        <div class="input-container">
            <label for="test_const">Desired Power:</label>
            <!-- <span id="powerValue">0.8</span> -->
            <input type="range" min="0" max="1" step="0.01" value="0.8" oninput="updateValue(this.value)" id="powerSlider" name="powerSlider" required>
            <input type="number" id="test_const" name ="test_const"  value="0.8" oninput="updateValue(this.value)" required>
        </div>

        <script>
            function updateValue(value) {
                // document.getElementById('powerValue').textContent = value;
                document.getElementById('test_const').value = value;
                document.getElementById('powerSlider').value = value;
            }
        </script>

        <!-- Additional inputs for specific options -->
        <div id="t-control-inputs" class="conditional-inputs" style="display:none;">
            <label for="t-control-param">Control Arm:</label>
            <input type="number" id="t-control-param" name="t_control_param" value="1" >
            <label for="min_effect">Minimum Effect Size:</label>
            <input type="number" id="min_effect" name="min_effect"  min="0" max="1" step="0.01" value="0.1" style="width: 500px;" >
            <select id="is_one_tail_control" name="is_one_tail_control" style="width: 500px;" >
                <option value="" selected disabled>One- or Two-tailed test?</option>
                <option value="two-tailed">Two-tailed</option>
                <option value="one-tailed">One-tailed</option>
            </select>
        </div>

        <div id="t-constant-inputs" class="conditional-inputs" style="display:none;">
            <label for="t-constant-param">Constant Value:</label>
            <input type="number" id="t-constant-param" name="t_constant_param">
            <label for="min_effect2">Minimum Effect Size:</label>
            <input type="number" id="min_effect2" name="min_effect2"  min="0" max="1" step="0.01" style="width: 500px;" >
            <select id="is_one_tail_const" name="is_one_tail_const" style="width: 500px;" required>
                <option value="" selected disabled>One- or Two-tailed test?</option>
                <option value="two-tailed">Two-tailed</option>
                <option value="one-tailed">One-tailed</option>
            </select>
        </div>

        <button type="submit">Get Recommendation</button>
    </form>
</br>
</body>
</html>


        <!-- Additional inputs for specific options -->
        <div id="t-control-inputs" class="conditional-inputs" style="display:none;">
            <label for="t-control-param">Control Arm:</label>
            <input type="number" id="t-control-param" name="t_control_param" value="1" >
            <label for="min_effect">Minimum Effect Size:</label>
            <input type="number" id="min_effect" name="min_effect" min="0" max="1" step="0.01" value="0.1" style="width: 500px;">
            <select id="is_one_tail_control" name="is_one_tail_control" style="width: 500px;" required>
                <option value="" selected disabled>One- or Two-tailed test?</option>
                <option value="two-tailed">Two-tailed</option>
                <option value="one-tailed">One-tailed</option>
            </select>
        </div>


<div id="t-constant-inputs" class="conditional-inputs" style="display:none;">
    <label for="t-constant-param">Constant Value:</label>
    <input type="number" id="t-constant-param" name="t_constant_param" min="0" max="1" step="0.01" required>
    <label for="min_effect2">Minimum Effect Size:</label>
    <input type="number" id="min_effect2" name="min_effect2" min="0" max="1" step="0.01" value="0.1" style="width: 500px;">
    <select id="is_one_tail_const" name="is_one_tail_const" style="width: 500px;" required>
        <option value="" selected disabled>One- or Two-tailed test?</option>
        <option value="two-tailed">Two-tailed</option>
        <option value="one-tailed">One-tailed</option>
    </select>
</div>